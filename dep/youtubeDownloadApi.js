const puppeteer=require("puppeteer"),axios=require("axios");async function downloadYoutubeURL(e){try{let t=await puppeteer.launch(),a=await t.newPage();async function r(){let e=await a.evaluate(()=>{if(document.body.innerHTML.includes('rel="nofollow">Download')){let e=Array.from(document.querySelectorAll('a[rel="nofollow"]')),t=e.find(e=>"Download"===e.innerText);return t?t.href:null}return null});return e||(await new Promise(e=>setTimeout(e,1e3)),r())}await a.goto("https://ytmp3s.nu"),await a.type("#url",e),await a.click('input[type="submit"][value="Convert"]');let o=await r(),n=await a.evaluate(()=>{let e=document.querySelector("form"),t=e.querySelector("div:not([id]):not([class])");return t.innerText.trim()}),l=await axios.get(o,{responseType:"arraybuffer"}),i=Buffer.from(l.data);return await t.close(),{data:i.toString("base64"),name:n}}catch(u){throw console.error("Error:",u.message),u}}module.exports=downloadYoutubeURL;